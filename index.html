<!DOCTYPE html>
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solaris - Hydra Sources</title>

    <link rel="icon" type="image/png" href="img/solaris-icon.png">
    <link rel="apple-touch-icon" href="img/solaris-icon.png">

    <link rel="preconnect" href="https://fonts.googleapis.com/">
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="">
    <link href="./Kazumi Fonte_files/css2" rel="stylesheet">
    <script defer="" src="./Kazumi Fonte_files/beacon.min.js.baixados" data-cf-beacon="{&quot;token&quot;: &quot;d5d0b711e5b740ca8c8e048cb3b29384&quot;}"></script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Montserrat";
      }

      body {
        background-image: linear-gradient(
          230deg,
          #23262f,
          #1f2129,
          #1d1f26,
          #1b1d23,
          #16191d,
          #141619,
          #121417 60%,
          #101114 70% 80%,
          #0d0f11 90%,
          #0b0c0e
        );
        color: #ffffff;
        text-align: center;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
      }

      /* ===== UPDATE BAR STYLES ===== */
      .update-bar {
        background: linear-gradient(
          90deg,
          #6a1b9a 0%,
          #9c27b0 50%,
          #6a1b9a 100%
        );
        color: white;
        padding: 12px 0;
        overflow: hidden;
        position: relative;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
      }

      .update-bar-content {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 30px;
        animation: slideIn 0.5s ease-out;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .update-bar-title {
        font-weight: 700;
        font-size: 0.95rem;
        text-transform: uppercase;
        letter-spacing: 1px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .update-pulse {
        width: 8px;
        height: 8px;
        background: #14f195;
        border-radius: 50%;
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
          transform: scale(1);
        }
        50% {
          opacity: 0.5;
          transform: scale(1.3);
        }
      }

      .update-games {
        display: flex;
        gap: 20px;
        flex-wrap: wrap;
        justify-content: center;
        align-items: center;
      }

      .update-game-item {
        display: flex;
        align-items: center;
        gap: 8px;
        background: rgba(255, 255, 255, 0.1);
        padding: 6px 14px;
        border-radius: 20px;
        font-size: 0.85rem;
        transition: all 0.3s;
        backdrop-filter: blur(5px);
      }

      .update-game-item:hover {
        background: rgba(255, 255, 255, 0.2);
        transform: translateY(-2px);
      }

      .update-game-name {
        font-weight: 600;
        max-width: 250px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      .update-game-date {
        font-size: 0.75rem;
        opacity: 0.85;
        font-weight: 500;
      }

      .update-bar-loading {
        text-align: center;
        font-size: 0.9rem;
        opacity: 0.9;
      }

      .update-bar-error {
        background: linear-gradient(
          90deg,
          #d32f2f 0%,
          #f44336 50%,
          #d32f2f 100%
        );
      }

      .update-separator {
        width: 2px;
        height: 20px;
        background: rgba(255, 255, 255, 0.3);
      }

      /* Responsive */
      @media (max-width: 768px) {
        .update-bar {
          padding: 10px 15px;
        }

        .update-bar-content {
          flex-direction: column;
          gap: 10px;
        }

        .update-games {
          gap: 8px;
        }

        .update-game-item {
          font-size: 0.8rem;
          padding: 5px 10px;
        }

        .update-game-name {
          max-width: 150px;
        }
      }

      header {
        padding-top: 80px;
        font-size: 2.5rem;
        font-weight: 800;
        letter-spacing: 1px;
      }

      .content {
        margin: 10px 0px 35px 0px;
        display: flex;
        justify-content: center;
        gap: 20px;
        flex-wrap: wrap;
      }

      .content button {
        background-color: #3b3f4b;
        color: #ffffff;
        border: none;
        padding: 15px 30px;
        font-size: 1.1rem;
        cursor: pointer;
        border-radius: 8px;
        transition: transform 0.2s, background-color 0.3s;
      }

      .content button:hover {
        background-color: #505360;
        transform: scale(1.05);
      }

      .content button.donate {
        background-color: #6a1b9a;
        background-image: linear-gradient(45deg, #0070ba 50%, #ff0800 50%);
        background-size: 200% 100%;
        background-position: right bottom;
        transition: all 0.3s ease;
      }

      .content button.donate:hover {
        background-position: left bottom;
        transform: scale(1.05);
      }

      /* Modal de escolha */
      .modal {
        display: none;
        position: fixed;
        z-index: 1;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.8);
      }

      .modal-content {
        background-color: #23262f;
        margin: 15% auto;
        padding: 20px;
        border-radius: 10px;
        width: 90%;
        max-width: 500px;
        min-width: 320px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        animation: modalopen 0.4s;
      }

      @keyframes modalopen {
        from {
          opacity: 0;
          transform: translateY(-50px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .modal-header h2 {
        margin: 0;
        color: #ffffff;
      }

      .close {
        color: #aaa;
        font-size: 28px;
        font-weight: bold;
        cursor: pointer;
      }

      .close:hover {
        color: #fff;
      }

      .payment-options {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 15px;
        width: 100%;
        padding: 0 20px;
        box-sizing: border-box;
      }

      .payment-btn {
        padding: 12px 24px;
        border: none;
        border-radius: 8px;
        color: white;
        font-weight: bold;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        transition: transform 0.2s;
        width: 100%;
        max-width: 280px;
        min-width: 280px;
      }

      .payment-btn:hover {
        transform: scale(1.02);
      }

      .paypal-btn {
        background-color: #0070ba;
      }

      .mbway-btn {
        background-color: #ff0800;
      }

      .solana-btn {
        background: linear-gradient(135deg, #9945ff 0%, #14f195 100%);
        color: white;
      }

      .solana-btn:hover {
        background: linear-gradient(135deg, #7a36cc 0%, #12d185 100%);
      }

      .region-options {
        margin-bottom: 20px;
        display: flex;
        justify-content: center;
        gap: 15px;
      }

      .region-btn {
        background: none;
        border: none;
        color: #a3a9ff;
        font-weight: bold;
        cursor: pointer;
        padding: 5px 10px;
      }

      .region-btn.active {
        border-bottom: 2px solid #a3a9ff;
      }

      #solana-amount-selector {
        margin-bottom: 15px;
        width: 100%;
      }

      #solana-amount-selector h4 {
        color: #a3a9ff;
        margin-bottom: 10px;
      }

      .amount-buttons {
        display: flex;
        gap: 10px;
        justify-content: center;
        flex-wrap: wrap;
      }

      .amount-btn {
        background: #3b3f4b;
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 5px;
        cursor: pointer;
        transition: all 0.3s;
      }

      .amount-btn:hover {
        background: #505360;
      }

      .amount-btn.active {
        background: #14f195;
        color: #23262f;
        font-weight: bold;
      }

      #custom-amount {
        width: 100px;
        padding: 8px;
        background: #2d303b;
        color: white;
        border: 1px solid #3b3f4b;
        border-radius: 5px;
        text-align: center;
      }

      #solana-qr-container {
        display: none;
        text-align: center;
        margin: 15px auto;
        width: fit-content;
      }

      #solanaQrCode {
        background: white;
        padding: 10px;
        border-radius: 8px;
      }

      #donationHistory {
        max-width: 800px;
        margin: 0 auto 40px;
        background: rgba(34, 36, 43, 0.7);
        padding: 20px;
        border-radius: 10px;
      }

      #donationHistory h3 {
        text-align: center;
        margin-bottom: 15px;
      }

      #donationList {
        width: 100%;
        border-collapse: collapse;
      }

      #donationList th {
        padding: 10px;
        background: #2d303b;
      }

      #donationList td {
        padding: 10px;
        border-bottom: 1px solid #3b3f4b;
      }

      .status-pending {
        color: #ff5a00;
      }

      .status-confirmed {
        color: #14f195;
      }

      .verify-btn {
        background: #3b3f4b;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        margin-top: 15px;
        transition: all 0.3s;
      }

      .verify-btn:hover {
        background: #505360;
      }

      .info {
        max-width: 800px;
        margin: 0 auto 40px;
        padding: 20px;
        background-color: rgba(34, 36, 43, 0.9);
        border-radius: 10px;
        box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.5);
        line-height: 1.6;
        text-align: justify;
      }

      .info h3 {
        text-align: left;
        margin-bottom: 10px;
        font-size: 1.2rem;
        font-weight: 700;
      }

      .info p {
        margin-bottom: 15px;
        word-spacing: -0.05rem;
        text-align: left;
        font-weight: 500;
      }

      footer {
        padding: 15px;
        font-size: 0.9rem;
        color: #aaaaaa;
      }

      a:-webkit-any-link {
        color: #a3a9ff;
      }

      .language-selector {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 1000;
        display: flex;
        gap: 10px;
      }

      .lang-btn {
        background: rgba(59, 63, 75, 0.8);
        color: white;
        border: none;
        padding: 8px 12px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 0.9rem;
        transition: all 0.3s;
      }

      .lang-btn.active {
        background: #a3a9ff;
        color: #23262f;
      }

      .lang-btn:hover {
        background: #505360;
      }

      .lang-btn.active:hover {
        background: #8b96ff;
      }
    </style>
  </head>
  <body>
    <div id="updateBar" class="update-bar" style="display: none">
      <div class="update-bar-content">
        <div class="update-bar-loading">
          <span data-text-pt="Carregando atualizações..." data-text-en="Loading updates...">Loading updates...</span>
        </div>
      </div>
    </div>

    <div class="language-selector">
      <button class="lang-btn" id="btn-pt">PT</button>
      <button class="lang-btn active" id="btn-en">EN</button>
    </div>

    <header id="title">Solaris - Hydra Sources</header>

    <div class="content">
      <button id="addBtn" onclick="abrirHydra()" data-text-pt="Instalar - Fonte Principal" data-text-en="Install - Main Source">Install - Main Source</button>
      <button id="addBtn" onclick="abrirHydraVR()" data-text-pt="Instalar - Fonte Fixes" data-text-en="Install - Fixes Source">Install - Fixes Source</button>
      <button id="copyBtn" onclick="copiarLink()" data-text-pt="Link - Fonte Principal" data-text-en="Link - Main Source">Link - Main Source</button>
      <button id="copyBtn" onclick="copiarLinkVR()" data-text-pt="Link - Fonte Fixes" data-text-en="Link - Fixes Source">Link - Fixes Source</button>
      <button id="addBtn" onclick="pedidopraFonte()" data-text-pt="Página - Todos Releases" data-text-en="Page - All Releases">Page - All Releases</button>
      <button class="donate" onclick="abrirModalDoacao()" data-text-pt="Ajude o Projeto" data-text-en="Help the Project">Help the Project</button>
    </div>

    <div id="donationModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modal-title" data-text-pt="Escolha o método de doação" data-text-en="Choose donation method">Choose donation method</h2>
          <span class="close" onclick="fecharModal()">×</span>
        </div>

        <div class="region-options">
          <button class="region-btn active" onclick="mostrarOpcoes('tradicional')" data-text-pt="Tradicional" data-text-en="Traditional">Traditional</button>
          <button class="region-btn" onclick="mostrarOpcoes('crypto')" data-text-pt="Criptomoedas" data-text-en="Cryptocurrency">Cryptocurrency</button>
        </div>

        <div id="opcoes-tradicional" class="payment-options" style="display: flex">
          <button class="payment-btn paypal-btn" onclick="doarPayPal()">
            <img src="./Kazumi Fonte_files/pp_cc_mark_37x23.jpg" alt="PayPal" width="37" height="23">
            <span data-text-pt="Doar via PayPal" data-text-en="Donate via PayPal">Donate via PayPal</span>
          </button>
          <button class="payment-btn livepix-btn" onclick="doarLivePix()">
            <img src="./Kazumi Fonte_files/7ea666e6-f232-4dcd-9ff2-9e4203edbb5c-3745967960.png" alt="LivePix" width="37" height="23">
            <span data-text-pt="Doar via LivePix" data-text-en="Donate via LivePix">Donate via LivePix</span>
          </button>
          <button class="payment-btn mbway-btn" onclick="doarMBWay()">
            <span data-text-pt="Doar via MB Way" data-text-en="Donate via MB Way">Donate via MB Way</span>
          </button>
        </div>

        <div id="opcoes-crypto" class="payment-options" style="display: none; flex-direction: column">
          <div id="solana-amount-selector">
            <h4 data-text-pt="Escolha o valor (SOL):" data-text-en="Choose amount (SOL):">Choose amount (SOL):</h4>
            <div class="amount-buttons">
              <button class="amount-btn active" onclick="setSolAmount(1)">
                1 SOL
              </button>
              <button class="amount-btn" onclick="setSolAmount(5)">
                5 SOL
              </button>
              <button class="amount-btn" onclick="setSolAmount(10)">
                10 SOL
              </button>
              <input type="number" id="custom-amount" data-placeholder-pt="Outro valor" data-placeholder-en="Other amount" placeholder="Other amount" min="0.1" step="0.1">
            </div>
          </div>

          <div id="solana-qr-container">
            <canvas id="solanaQrCode"></canvas>
            <p style="font-size: 0.8rem; margin-top: 10px" data-text-pt="Escaneie com Phantom Wallet" data-text-en="Scan with Phantom Wallet">Scan with Phantom Wallet</p>
          </div>
          <button class="payment-btn solana-btn" onclick="doarViaSolana()">
            <img src="./Kazumi Fonte_files/solana-sol-logo-png_seeklogo-423095.png" alt="Solana" width="20">
            <span data-text-pt="Gerar Link/QR Code" data-text-en="Generate Link/QR Code">Generate Link/QR Code</span>
          </button>
        </div>
      </div>
    </div>

    <div class="info">
      <h3 id="fonteHeader" data-text-pt="Sobre" data-text-en="About">About</h3>
      <p id="fonteInfo" data-text-pt="O intuito de criar estas fontes foi para uso pessoal e consequentemente ajudar a comunidade, como não há muito conteúdo, os releases são testados e verificados individualmente. Bom, a Fonte Principal tem como objetivo fornecer Clean Steam Files (arquivos originais Steam), Online (versões/builds que funcionam multiplayer) e Delisted/Abandonwares (jogos antigos dificeis de encontrar). Já a Fonte Fixes, o propósito é oferecer correções/features para os jogos já instalados terem Conquistas (GoldBerg Emu), Multiplayer (OnlineFix/Clientes) e até Mods, funcionalidades que melhoram a experiência de seus jogos." data-text-en="The purpose of creating these sources was for personal use and consequently to help the community, as there is not much content; releases are tested and verified individually. Well, the Main Source aims to provide Clean Steam Files (original Steam files), Online (multiplayer versions/builds) and Delisted/Abandonwares (old hard-to-find games). Now, the Source Fixes, the principle is to offer corrections/features for already installed games to have Achievements (GoldBerg Emu), Multiplayer (OnlineFix/ Clients), and even Mods, functionalities that improve the experience of your games.">The purpose of creating these sources was for personal use and consequently to help the community, as there is not much content; releases are tested and verified individually. Well, the Main Source aims to provide Clean Steam Files (original Steam files), Online (multiplayer versions/builds) and Delisted/Abandonwares (old hard-to-find games). Now, the Source Fixes, the principle is to offer corrections/features for already installed games to have Achievements (GoldBerg Emu), Multiplayer (OnlineFix/ Clients), and even Mods, functionalities that improve the experience of your games.</p>
      <h3 id="linkHeader" data-text-pt="Links" data-text-en="Links">Links</h3>
      <p id="linkInfo" data-text-pt="Maioritariamente dos releases são originários e checados pela comunidade do CSRIN, bem como, de sites presentes na Mega Thread e no FMHY. Há também o uso de arquivos preservados pelo Internet Archive e por desenvolvedores de projetos para jogos antigos." data-text-en="Most of the releases are originated and checked by the CSRIN community, as well, from sites present in the Mega Thread and FMHY. There is also the use of files preserved by the Internet Archive and by developers of projects for old games.">Most of the releases are originated and checked by the CSRIN community, as well, from sites present in the Mega Thread and FMHY. There is also the use of files preserved by the Internet Archive and by developers of projects for old games.</a></p>
      <h3 id="donateHeader" data-text-pt="Doação" data-text-en="Donation">Donation</h3>
      <p id="donateInfo" data-text-pt="Sinta-se livre para ajudar este projeto caso goste do meu trabalho, qualquer montante é muito bem vindo e ajuda a manter essas fontes ativas e com cada vez mais arquivos!" data-text-en="If you like my work and want to make a donation via PayPal, MB Way, LivePix or Solana (Phantom), I accept any amount. All donations help keep the source active and with new games!">If you like my work and want to make a donation via PayPal, MB Way, LivePix or Solana (Phantom), I accept any amount. All donations help keep the source active and with new games!</p>

      <footer id="footer" data-text-pt="© 2025 Solaris (Baseado no HTML criado por Shisuys e Kazumi, créditos para eles)." data-text-en="© 2025 Solaris (Based on HTML created by Shisuys and Kazumi, credits to them).">© 2025 Solaris (Based on HTML created by Shisuys and Kazumi, credits to them).</footer>
    </div>

    <script src="./Kazumi Fonte_files/qrcode.min.js.baixados"></script>

    <script>
      // Configuração da Carteira
      const solanaConfig = {
        // *** IMPORTANTE: Mude este endereço para o seu! ***
        address: "Go2kCrGXbyj8rJJgC7MPbDpGVSjTv72fkKvbf51wP8GX",
        memo: "DOACAO_KAZUMI",
      };

      let selectedSolAmount = 1;
      let currentLanguage = "pt";

      // ===== UPDATE BAR FUNCTIONALITY =====
      const DAYS_TO_SHOW = 0; // Show only today's games (0 = today only)

      async function loadRecentUpdates() {
        const updateBar = document.getElementById("updateBar");

        try {
          // Add cache-busting parameter to always get fresh data
          const cacheBuster = new Date().getTime();
          // *** IMPORTANTE: Mude este URL para o seu arquivo .json no seu GitHub Pages! ***
          const response = await fetch(
            `https://raw.githubusercontent.com/SolarisTM/Hydra-Sources/refs/heads/main/Solaris-Main.json?t=${cacheBuster}`
          );

          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }

          const data = await response.json();

          // Get today's date (ignoring time)
          const now = new Date();
          const todayDate = now.toISOString().split("T")[0]; // Format: YYYY-MM-DD

          console.log("Looking for games uploaded on:", todayDate);

          // Filter and process games - only from TODAY
          const recentGames = data.downloads
            .filter((game) => {
              const uploadDate = new Date(game.uploadDate);
              const uploadDateStr = uploadDate.toISOString().split("T")[0];
              const isToday = uploadDateStr === todayDate;

              if (isToday) {
                console.log("Found today's game:", game.title);
              }

              return isToday;
            })
            .map((game) => {
              // Extract game name before first (
              let cleanName = game.title.split("(")[0].trim();
              // Remove common tags like [Pre-Instalado], [FitGirl], etc
              cleanName = cleanName.replace(/\[.*?\]/g, "").trim();
              // Remove trailing dashes or special characters
              cleanName = cleanName.replace(/[-–—]\s*$/, "").trim();

              return {
                name: cleanName,
                uploadDate: new Date(game.uploadDate),
                fileSize: game.fileSize,
              };
            })
            .sort((a, b) => b.uploadDate - a.uploadDate) // Most recent first
            .slice(0, 5); // Only keep the 5 most recent games

          console.log(
            `Found ${
              data.downloads.filter((game) => {
                const uploadDate = new Date(game.uploadDate);
                const uploadDateStr = uploadDate.toISOString().split("T")[0];
                return uploadDateStr === todayDate;
              }).length
            } games uploaded today, showing the 5 most recent`
          );
          console.log("Today's games:", recentGames);

          renderUpdateBar(recentGames);
        } catch (err) {
          console.error("Error fetching updates:", err);
          // Hide the update bar on error instead of showing error message
          updateBar.style.display = "none";
        }
      }

      function formatDateRelative(date) {
        const today = new Date();
        today.setHours(0, 0, 0, 0);
        const compareDate = new Date(date);
        compareDate.setHours(0, 0, 0, 0);

        const diffTime = today - compareDate;
        const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));

        if (currentLanguage === "pt") {
          if (diffDays === 0) return "Hoje";
          if (diffDays === 1) return "Ontem";
          if (diffDays < 7) return `${diffDays} dias atrás`;
          return date.toLocaleDateString("pt-BR");
        } else {
          if (diffDays === 0) return "Today";
          if (diffDays === 1) return "Yesterday";
          if (diffDays < 7) return `${diffDays} days ago`;
          return date.toLocaleDateString("en-US");
        }
      }

      function renderUpdateBar(games) {
        const updateBar = document.getElementById("updateBar");

        if (games.length === 0) {
          updateBar.style.display = "none";
          console.log("No games uploaded today - update bar hidden");
          return;
        }

        updateBar.style.display = "block";
        updateBar.classList.remove("update-bar-error");

        const displayGames = games;
        const titleText = currentLanguage === "pt" ? "Novos Hoje" : "New Today";

        updateBar.innerHTML = `
    <div class="update-bar-content">
      <div class="update-bar-title">
        <div class="update-pulse"></div>
        <span>${titleText}:</span>
      </div>
            <div class="update-separator"></div>
            <div class="update-games">
              ${displayGames
                .map(
                  (game) => `
                <div class="update-game-item">
                  <span class="update-game-name" title="${game.name}">${
                    game.name
                  }</span>
                  <span class="update-game-date">(${formatDateRelative(
                    game.uploadDate
                  )})</span>
                </div>
              `
                )
                .join("")}
            </div>
          </div>
        `;
      }

      function renderUpdateBarError() {
        const updateBar = document.getElementById("updateBar");
        const errorText =
          currentLanguage === "pt"
            ? "Erro ao carregar atualizações"
            : "Error loading updates";

        updateBar.style.display = "block";
        updateBar.classList.add("update-bar-error");
        updateBar.innerHTML = `
          <div class="update-bar-content">
            <div class="update-bar-loading">${errorText}</div>
          </div>
        `;

        console.error("Failed to load update bar");
      }

      // Traduções
      const translations = {
        pt: {
          copySuccess: "Link Copiado!",
          copySuccessVR: "Link Copiado!",
          mbwayInstructions:
            'Para doar via MB Way:\n\n1. Abre a app MB Way no seu telemóvel\n2. Seleciona "Enviar dinheiro"\n3. Insere este número: {phone}\n\nObrigado pela tua doação!',
          thanks: "Obrigado pela tua doação!",
          invalidAmount: "Por favor insira um valor válido maior que 0!",
          addressCopied: "Endereço SOL copiado! Você pode enviar {amount} SOL",
          copyManually: "Copie manualmente seu endereço Solana:",
        },
        en: {
          copySuccess: "Link Copied!",
          copySuccessVR: "Link Copied!",
          mbwayInstructions:
            'To donate via MB Way:\n\n1. Open the MB Way app on your phone\n2. Select "Send money"\n3. Enter this number: {phone}\n\nThank you for your donation!',
          thanks: "Thank you for your donation!",
          invalidAmount: "Please enter a valid amount greater than 0!",
          addressCopied: "SOL address copied! You can send {amount} SOL",
          copyManually: "Manually copy your Solana address:",
        },
      };

      // Detecção automática de região/idioma
      function detectLanguage() {
        const savedLang = window.localStorage
          ? localStorage.getItem("preferredLanguage")
          : null;
        if (savedLang && (savedLang === "pt" || savedLang === "en")) {
          return savedLang;
        }

        const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
        const portugueseTimezones = [
          "Europe/Lisbon",
          "Atlantic/Madeira",
          "Atlantic/Azores",
          "America/Sao_Paulo",
          "America/Fortaleza",
          "America/Recife",
          "America/Araguaina",
          "America/Maceio",
          "America/Bahia",
          "America/Campo_Grande",
          "America/Cuiaba",
          "America/Santarem",
          "America/Porto_Velho",
          "America/Boa_Vista",
          "America/Manaus",
          "America/Eirunepe",
          "America/Rio_Branco",
        ];

        if (portugueseTimezones.includes(timezone)) {
          return "pt";
        }

        const browserLang = navigator.language || navigator.userLanguage;
        if (browserLang.startsWith("pt")) {
          return "pt";
        }

        return "en";
      }

      // Função para definir idioma
      function setLanguage(lang) {
        currentLanguage = lang;

        if (window.localStorage) {
          localStorage.setItem("preferredLanguage", lang);
        }

        document.querySelectorAll("[data-text-pt]").forEach((element) => {
          const text = element.getAttribute(`data-text-${lang}`);
          if (text) {
            if (element.tagName === "INPUT") {
              element.placeholder = text;
            } else {
              element.innerHTML = text;
            }
          }
        });

        document
          .querySelectorAll("[data-placeholder-pt]")
          .forEach((element) => {
            const placeholder = element.getAttribute(
              `data-placeholder-${lang}`
            );
            if (placeholder) {
              element.placeholder = placeholder;
            }
          });

        document.querySelectorAll(".lang-btn").forEach((btn) => {
          btn.classList.remove("active");
        });
        document.getElementById(`btn-${lang}`).classList.add("active");

        document.documentElement.lang = lang === "pt" ? "pt-BR" : "en";

        // Reload update bar with new language
        loadRecentUpdates();
      }

      // Funções de doação
      function setSolAmount(amount) {
        selectedSolAmount = amount;
        document.querySelectorAll(".amount-btn").forEach((btn) => {
          btn.classList.remove("active");
        });
        event.target.classList.add("active");
        document.getElementById("custom-amount").value = "";
      }

      function copiarLink() {
        // *** IMPORTANTE: Mude este URL para o seu arquivo .json principal! ***
        navigator.clipboard.writeText(
          "https://raw.githubusercontent.com/SolarisTM/Hydra-Sources/refs/heads/main/Solaris-Main.json"
        );
        alert(translations[currentLanguage].copySuccess);
      }

      function copiarLinkVR() {
        // *** IMPORTANTE: Mude este URL para o seu arquivo .json VR! ***
        navigator.clipboard.writeText(
          "https://raw.githubusercontent.com/SolarisTM/Hydra-Sources/refs/heads/main/Solaris-Fixes.json"
        );
        alert(translations[currentLanguage].copySuccessVR);
      }

      function abrirHydra() {
        // *** IMPORTANTE: Mude este URL para o seu arquivo .json principal! ***
        window.open(
          "hydralauncher://install-source?urls=https://raw.githubusercontent.com/SolarisTM/Hydra-Sources/refs/heads/main/Solaris-Main.json"
        );
      }

      function abrirHydraVR() {
        // *** IMPORTANTE: Mude este URL para o seu arquivo .json VR! ***
        window.open(
          "hydralauncher://install-source?urls=https://raw.githubusercontent.com/SolarisTM/Hydra-Sources/refs/heads/main/Solaris-Fixes.json"
        );
      }

      function pedidopraFonte() {
        // *** IMPORTANTE: Mude este URL para o seu link de formulário de pedidos! ***
        window.open("form.html");
      }

      function abrirModalDoacao() {
        document.getElementById("donationModal").style.display = "block";
      }

      function fecharModal() {
        document.getElementById("donationModal").style.display = "none";
      }

      function doarPayPal() {
        // *** IMPORTANTE: Mude este URL para o seu link de doação do PayPal! ***
        window.open(
          "https://www.paypal.com/donate/?hosted_button_id=DF2DUYWWQM8TG"
        );
        fecharModal();
      }

      function doarLivePix() {
        // *** IMPORTANTE: Mude este URL para o seu link de doação LivePix/Pix! ***
        window.open("https://livepix.gg/fontekazumi");
        fecharModal();
      }

      function doarMBWay() {
        // *** IMPORTANTE: Mude este número para o seu número de MB Way! ***
        const phoneNumber = "351939224252";

        if (/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)) {
          window.location.href = `mbway://sendtransfer?phone=${phoneNumber}`;

          setTimeout(() => {
            window.open(`https://www.mbway.pt`, "_blank");
          }, 2000);
        } else {
          const message = translations[
            currentLanguage
          ].mbwayInstructions.replace("{phone}", phoneNumber);
          alert(message);
        }

        fecharModal();
      }

      function mostrarOpcoes(regiao) {
        document.querySelectorAll(".payment-options").forEach((el) => {
          el.style.display = "none";
          void el.offsetHeight;
        });

        document.querySelectorAll(".region-btn").forEach((btn) => {
          btn.classList.remove("active");
        });

        const opcaoSelecionada = document.getElementById(`opcoes-${regiao}`);
        opcaoSelecionada.style.display = "flex";
        document
          .querySelector(`.region-btn[onclick="mostrarOpcoes('${regiao}')"]`)
          .classList.add("active");

        if (regiao === "tradicional") {
          document.getElementById("solana-qr-container").style.display = "none";
        }
      }

      function gerarQrCode(amount) {
        const qrData = `solana:${solanaConfig.address}?amount=${amount}&memo=${solanaConfig.memo}`;
        QRCode.toCanvas(
          document.getElementById("solanaQrCode"),
          qrData,
          {
            width: 180,
            margin: 2,
            color: {
              dark: "#14F195",
              light: "#23262f",
            },
          },
          (error) => {
            if (error) console.error(error);
          }
        );
      }

      function doarViaSolana() {
        const customAmount = parseFloat(
          document.getElementById("custom-amount").value
        );
        const amount = customAmount || selectedSolAmount;

        if (customAmount && (customAmount <= 0 || isNaN(customAmount))) {
          alert(translations[currentLanguage].invalidAmount);
          return;
        }

        gerarQrCode(amount);
        document.getElementById("solana-qr-container").style.display = "block";

        window.location.href = `https://phantom.app/ul/v1/transfer?recipient=${solanaConfig.address}&amount=${amount}`;

        setTimeout(() => {
          navigator.clipboard
            .writeText(solanaConfig.address)
            .then(() => {
              const message = translations[
                currentLanguage
              ].addressCopied.replace("{amount}", amount);
              alert(message);
            })
            .catch(() => {
              prompt(
                translations[currentLanguage].copyManually,
                solanaConfig.address
              );
            });
        }, 500);
      }

      // Inicialização
      document.addEventListener("DOMContentLoaded", () => {
        document
          .getElementById("btn-pt")
          .addEventListener("click", () => setLanguage("pt"));
        document
          .getElementById("btn-en")
          .addEventListener("click", () => setLanguage("en"));

        setLanguage(detectLanguage());

        // Load update bar
        loadRecentUpdates();
      });

      window.onclick = function (event) {
        if (event.target == document.getElementById("donationModal")) {
          fecharModal();
        }
      };
    </script>
  

</body></html>
